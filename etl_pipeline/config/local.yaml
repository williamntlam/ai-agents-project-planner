# Local development configuration
# Extends base.yaml with development-specific overrides

# Extractor overrides for local dev
extractors:
  filesystem:
    base_path: "./data"  # Data directory in project root (parent of etl_pipeline)
    max_file_size_mb: 10  # Smaller for testing

# Transformer overrides for local dev
transformers:
  chunker:
    chunk_size: 500  # Smaller chunks for testing
    chunk_overlap: 100
  
  embedder:
    provider: "openai"
    model: "text-embedding-3-small"  # Use smaller/cheaper model for dev
    batch_size: 10  # Smaller batches for testing
    max_retries: 2  # Fewer retries for faster failures

# Loader overrides for local dev
loaders:
  vector_db:
    # Use DATABASE_URL from environment (required)
    connection_string: "${DATABASE_URL:?DATABASE_URL environment variable is required}"
    batch_size: 50  # Smaller batches
    create_index: true
  
  audit:
    # Use DATABASE_URL from environment (required)
    connection_string: "${DATABASE_URL:?DATABASE_URL environment variable is required}"
    # Or use SQLite for local dev:
    # type: "sqlite"
    # db_path: "./logs/audit_local.db"

# Pipeline overrides
pipeline:
  incremental: false  # Re-process all files in local dev
  continue_on_error: true

# Logging overrides
logging:
  level: "DEBUG"  # More verbose in dev
  log_file: "./logs/etl_pipeline_local.log"

# Retry overrides
retry:
  connection:
    max_attempts: 3  # Fewer retries in dev
  api_call:
    max_attempts: 2
